<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Volleyball at Maramonte Park</title>
  <style>
    :root{--bg:#0f172a;--card:#0b1220;--text:#e5e7eb;--muted:#94a3b8;--border:#1f2937;--accent:#3b82f6}
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1200px 800px at 20% -10%,#1e293b 0,#0f172a 60%);color:var(--text);
         font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    header{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;margin-bottom:16px}
    h1{margin:0;font-size:clamp(24px,4vw,36px)}
    .muted{color:var(--muted)}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;
         border:1px solid var(--border);background:var(--card);color:var(--text);text-decoration:none;font-weight:600}
    .btn.primary{background:var(--accent);border-color:transparent;color:#fff}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.02));border:1px solid var(--border);
          border-radius:16px;padding:18px}
    iframe{width:100%;min-height:760px;background:transparent;border:1px solid #ccc;border-radius:12px}
    .subhead{margin:0 0 10px;font-size:clamp(16px,2.8vw,22px);font-weight:600}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Volleyball at Maramonte Park</h1>
        <p class="muted">Choose your 30-minute windows (Tuesdays, 4:00–6:30pm). Add player name, age, and an optional photo.</p>
      </div>
      <a class="btn primary" href="https://airtable.com/appN2XRZiJcUHFNIF/pagJupQbsAPne7Szo/form" target="_blank" rel="noopener">
        Open form in new tab
      </a>
    </header>

    <section class="card">
      <!-- This heading is dynamic: it will show "Tuesday, Month Day, Year" in Pacific Time -->
      <h2 id="tuesdayHeading" class="subhead">Tuesday, …</h2>

      <!-- Airtable embed -->
      <iframe
        class="airtable-embed"
        title="USYVL Rec Sign-Up Form (Airtable)"
        src="https://airtable.com/embed/appN2XRZiJcUHFNIF/pagJupQbsAPne7Szo/form"
        frameborder="0"
        onmousewheel=""
        style="background: transparent; border: 1px solid #ccc;"
        allowfullscreen>
      </iframe>
    </section>

    <!-- Helper box with link to the live gallery -->
    <div style="margin-top:12px;padding:14px;border:1px solid #1f2937;border-radius:12px;
                background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.02));">
      <p style="margin:0 0 10px;color:#94a3b8;">
        After you submit the form above, click the button to see the live list of sign-ups.
      </p>
      <a href="./signuplist.html" class="btn-view"
         style="display:inline-block;background:#3b82f6;color:#fff;text-decoration:none;
                font-weight:600;padding:10px 14px;border-radius:10px;">
        View Current Sign-Ups →
      </a>
    </div>
  </div>

  <script>
    // Robust "now in PT" using formatToParts (avoids rebuilding from a plain string)
    (function () {
      const tz = 'America/Los_Angeles';

      function dateInPT(d) {
        const parts = new Intl.DateTimeFormat('en-US', {
          timeZone: tz,
          year: 'numeric', month: 'numeric', day: 'numeric',
          hour: 'numeric', minute: 'numeric', second: 'numeric',
          hour12: false
        }).formatToParts(d).reduce((o, p) => (o[p.type] = p.value, o), {});
        return new Date(
          Number(parts.year),
          Number(parts.month) - 1,
          Number(parts.day),
          Number(parts.hour),
          Number(parts.minute),
          Number(parts.second)
        );
      }

      const ptNow = dateInPT(new Date());
      const TUE = 2; // 0=Sun, 1=Mon, 2=Tue...
      const dow = ptNow.getDay();
      let addDays = (TUE - dow + 7) % 7;
      if (addDays === 0) addDays = 7; // if today is Tuesday, use NEXT Tuesday

      const nextTue = new Date(ptNow);
      nextTue.setDate(ptNow.getDate() + addDays);

      const heading = document.getElementById('tuesdayHeading');
      heading.textContent = new Intl.DateTimeFormat('en-US', {
        timeZone: tz, weekday: 'long', month: 'long', day: 'numeric', year: 'numeric'
      }).format(nextTue);

      document.title = 'Volleyball at Maramonte Park — ' + heading.textContent;
    })();
  </script>
</body>
</html>
